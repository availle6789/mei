# 基于双层规划模型的控制诱导模型

## 1 双层规划模型

### 1.1 上层模型

上层模型使用Webster延误公式进行处理
$$
D=∑_(i=1)^4▒∑_(j=1)^2▒{q_ij [(C(1-λ_i )^2)/2(1-λ_i x_ij ) +〖x_ij〗^2/(2q_ij (1-x_ij ) )]}
$$
式中：D为总延误，x是饱和度，C为周期， λ是绿信比，qij是流量

通过延误公式计算出延误

### 1.2 下层模型

下层模型使用Logit模型进行流量分配。



## 2 模型求解

### 2.1 基于遗传算法的上层模型求解

​          上层模型的目的是使用遗传算法迭代求解得到绿灯时间，适应度函数为Webster总延误公式

### 2.2 基于MSA的的下层模型求解

​          下层交通流式静态交通流分配问题，采用迭代加权法( method of successive averages，MSA) 进行求解



问题：使用MSA进行流量分配时，对代码调试中遗传算法中的流量xa=0，进一步调试发现边的流量只有最后一次可以被正确分配

